---
layout: post
title:  "Week 9, Day 2"
date:   2022-08-02 08:00:00 -0400
categories: jekyll update
---

Today was much, much better than yesterday. The dev presentation went smoothly, if a bit rushed, but it is what it is. The rest of the day has been spent fixing the issues of yesterday. I figured out that setting the rails config for the default url actually did work, but it was being ignored because I hadn't restarted Redis, which I guess had cached the incorrect url for turbo streams. Regardless, it was fixed. With that, invitations appear with buttons to accept and decline them that actually work now. Additionally, users can send invitations to other users with only their email, and there is additional safeguards to make sure that invitations can only be sent if a user is logged in and a member of the room they are inviting someone to.

There was a huge problem with strong parameters, though. For reference, those are the ones that use `params.require().permit`.`params.require()` requires a parameter to be present or throws an error, and then returns the value of that parameter in the params hash. I needed to require multiple, so I put them in as an array, which resulted in an array output instead of a map, which was not what I wanted. I needed to have the required parameter have a value of another hash, so I needed to put the outputs of the forms into a hash. That was a huge burden because rails only wants to let you do that in forms if you're doing a nested form to fill out a relationship with another object when you're creating the object you actually want to create. I was not trying to create a new user or room to create an invitation, so that was not working. I ended up having to use a janky workaround with strings that were interpreted as nesting things in hashes in the names of form fields. Something like `form.text_field "hash_name[internal_value]"` finally ended up working. Also, adding an `email=(value)` method in the model allowed me to set the user of an invitation directly by giving it an email as a parameter, which was very helpful